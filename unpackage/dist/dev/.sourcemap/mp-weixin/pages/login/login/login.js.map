{"version":3,"sources":["uni-app:///main.js",null,"webpack:///C:/Users/LENOVO/Desktop/智能监理/v-monitor-app/pages/login/login/login.vue?87a4","webpack:///C:/Users/LENOVO/Desktop/智能监理/v-monitor-app/pages/login/login/login.vue?d778","webpack:///C:/Users/LENOVO/Desktop/智能监理/v-monitor-app/pages/login/login/login.vue?d179","uni-app:///pages/login/login/login.vue","webpack:///C:/Users/LENOVO/Desktop/智能监理/v-monitor-app/pages/login/login/login.vue?9736","webpack:///C:/Users/LENOVO/Desktop/智能监理/v-monitor-app/pages/login/login/login.vue?3918"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","showPassword","wayOfLogin","phone","password","captcha","code","message","success","successful","uid","send","smsId","disabled","rememberFlag","checkFlag","showEye","mounted","that","methods","getuserinfo","strWebServicePath","commBnsUniHttpRequest","res","err","getApp","console","commBnsConfig","changePassword","getVerify","fun","time","self","clearInterval","uni","icon","title","duration","timer","pswforget","url","toLogin","toLoginCaptcha","checkboxChange","goToPrivacy","plus","switchChange","bindLoginWithCode","UserApi","bindLogin","flag","toRegister"],"mappings":"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","file":"pages/login/login/login.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;import '@dcloudio/uni-stat/dist/uni-cloud-stat.es.js';\nimport Vue from 'vue'\nimport Page from './pages/login/login/login.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./login.vue?vue&type=template&id=1389b5f4&\"\nvar renderjs\nimport script from \"./login.vue?vue&type=script&lang=js&\"\nexport * from \"./login.vue?vue&type=script&lang=js&\"\nimport style0 from \"./login.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/login/login/login.vue\"\nexport default component.exports","export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./login.vue?vue&type=template&id=1389b5f4&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./login.vue?vue&type=script&lang=js&\"","<!--\r\n * 实现功能：登录页面优化\r\n * 创    建：陈韬宇   2022年04月01日\r\n * 相关说明：\r\n * 附注说明：\r\n-->\r\n<template>\r\n  <view>\r\n    <!-- 背景填充物 -->\r\n    <view class=\"background1\"></view>\r\n    <view class=\"background2\"></view>\r\n    <view class=\"background3\"></view>\r\n    <view class=\"background4\"></view>\r\n    <view class=\"background5\"></view>\r\n    <view class=\"content\">\r\n      <view>\r\n        <image mode=\"widthFix\" class=\"logo\" src=\"/static/image/login/logo.svg\"></image>\r\n      </view>\r\n      <view class=\"title\">\r\n        <text>智能勘探管理系统</text>\r\n      </view>\r\n    </view>\r\n    <view class=\"uni-row\">\r\n      <view class=\"bottom-right\">\r\n        <text :class=\"[wayOfLogin ? 'txt' : 'txt-active' ]\" @click=\"toLogin()\">密码登录</text>\r\n      </view>\r\n      <view class=\"bottom-left\">\r\n        <text :class=\"[wayOfLogin ? 'txt-active' : 'txt' ]\" @click=\"toLoginCaptcha()\">验证码登录</text>\r\n      </view>\r\n    </view>\r\n    <view class=\"content-input\">\r\n      <!-- 账号输入 -->\r\n      <view class=\"user-input\">\r\n        <view class=\"icon-input\">\r\n          <image src=\"/static/image/login/user.svg\"></image>\r\n        </view>\r\n        <input class=\"placeholder\" v-model=\"phone\" type=\"number\" placeholder=\"请输入账号\" />\r\n      </view>\r\n      <!-- 密码输入 -->\r\n      <view v-if=\"wayOfLogin==false\" class=\"password-input\">\r\n        <view class=\"icon-input\">\r\n          <image src=\"/static/image/login/lock.svg\"></image>\r\n        </view>\r\n        <input class=\"placeholder\" cursor-spacing=\"10\" :password=\"showPassword\" v-model=\"password\" placeholder=\"密码\" />\r\n        <image class=\"icon-eye\" :src=\"showEye\"  @click=\"changePassword\">\r\n        </image>\r\n      </view>\r\n      <!-- 验证码输入 -->\r\n      <view v-else class=\"message-send\">\r\n        <view class=\"message-input\">\r\n          <view class=\"icon-input-message\">\r\n            <image src=\"/static/image/login/mail.svg\"></image>\r\n          </view>\r\n          <input class=\"placeholder-message\" v-model=\"captcha\" placeholder=\"请输入验证码\" />\r\n        </view>\r\n        <view class=\"message-btn\">\r\n          <button class=\"message-sender\" @click=\"getVerify()\" :disabled=\"disabled\">{{send}}</button>\r\n        </view>\r\n      </view>\r\n    </view>\r\n    <view class=\"uni-row\">\r\n      <view class=\"bottom-right\">\r\n        <switch @change=\"switchChange\" checked=\"true\" color=\"#5669FF\"></switch>\r\n        <text>记住我</text>\r\n      </view>\r\n      <view class=\"bottom-left\">\r\n        <text class=\"txt2\" @click=\"pswforget()\">忘记密码</text>\r\n        <!-- 注册 -->\r\n        <text class=\"txt2\" style=\"margin-left: 40rpx\" @click=\"toRegister()\">注册</text>\r\n      </view>\r\n    </view>\r\n    <view>\r\n      <button class=\"btn\" @tap=\"bindLogin\">登 录</button>\r\n    </view>\r\n    <view class=\"yinsi\">\r\n      <checkbox-group @change=\"checkboxChange\">\r\n        <label>\r\n          <checkbox value=\"1\" :checked=\"checkFlag\" color=\"#FFCC33\" style=\"transform:scale(0.7)\"><span\r\n              @click=\"goToPrivacy\">我已同意智能勘探隐私政策</span></checkbox>\r\n        </label>\r\n      </checkbox-group>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\n  //针对当前Http请求公共方法调用\r\n  import commBnsUniHttpRequest from '@/commBns/commBnsUniHttpRequest.js'\r\n\r\n  //环境配置变量\r\n  import commBnsConfig from '@/commBns/commBnsConfig.js'\r\n\r\n  // 引入登录api\r\n  import UserApi from '@/api/UserApi.js'\r\n\r\n  var curEnvirCfg = commBnsConfig.funcGetCurEnvirCfg()\r\n  export default {\r\n    data() {\r\n      return {\r\n        showPassword: true,\r\n        wayOfLogin: false, //false:密码登录,true:验证码登录\r\n        phone: '',\r\n        password: '',\r\n        captcha: '',\r\n        //用于接收response信息\r\n        code: 0,\r\n        message: '',\r\n        success: 0,\r\n        successful: false,\r\n        uid: 0,\r\n        send: '发送验证码',\r\n        smsId: '55896351646',\r\n        disabled: false,\r\n        rememberFlag: true,\r\n        checkFlag: true,\r\n        showEye: '../../../static/image/login/eye.svg'\r\n      }\r\n    },\r\n    mounted() {\r\n      let that = this\r\n      const usertel = uni.getStorageSync('usertel')\r\n      if (usertel) {\r\n        that.phone = usertel\r\n      } else {\r\n        that.phone = ''\r\n      }\r\n    },\r\n    methods: {\r\n      async getuserinfo() {\r\n        //localhost\r\n        let that = this\r\n        let strWebServicePath = '/user/' + that.uid + '/info'\r\n        //采用简易的方式进行处理\r\n        let [res, err] = await commBnsUniHttpRequest.FuncBnsHttpRequestWithGet(strWebServicePath, {}, {})\r\n        getApp().globalData.globaType = res.data.data.type\r\n        console.log(getApp().globalData.globaType);\r\n        commBnsConfig.FunSetPersistentData('userType', res.data.data.type) //保存用户角色信息\r\n      },\r\n      changePassword: function() {\r\n        this.showPassword = !this.showPassword    \r\n        if (!this.showPassword)\r\n        {\r\n          this.showEye = '/static/image/login/eye_open.svg'\r\n        }\r\n        else\r\n        {\r\n          this.showEye = '/static/image/login/eye.svg'\r\n        }\r\n      },\r\n      async getVerify() {\r\n        if (this.phone <= 0) {\r\n          uni.showToast({\r\n            icon: 'none',\r\n            title: '请输入手机号'\r\n          })\r\n          return\r\n        }\r\n        if (!(/^1[3456789]\\d{9}$/.test(this.phone))) {\r\n          uni.showToast({\r\n            icon: 'none',\r\n            title: '手机号格式错误'\r\n          })\r\n          return\r\n        }\r\n        //post获取验证码\r\n        var that = this\r\n        var strWebServicePath = '/sms/captcha?phone=' + this.phone + '&appKey=128safa12-1bs18w1c-12bd81js'\r\n        let [res, err] = await commBnsUniHttpRequest.FuncBnsHttpRequestWithGet(\r\n          strWebServicePath, {}, { 'Authorization': 'Basic YXBwOnBhc3N3b3Jk' }\r\n        )\r\n        console.log(res)\r\n        if (res.data.success === 1) {\r\n          that.smsId = res.data.data.smsId\r\n          uni.showToast({\r\n            icon: 'none',\r\n            title: '已发送',\r\n            duration: 2000\r\n          })\r\n        } else {\r\n          uni.showToast({\r\n            icon: 'none',\r\n            title: res.data.message,\r\n            duration: 2000\r\n          })\r\n        }\r\n        //发送验证码\r\n        let self = this\r\n        //验证码\r\n        self.disabled = true\r\n        var time = 60 //时间为60s，可以按情况更改 \r\n        var timer = setInterval(fun, 1000) //设置定时器 \r\n        function fun() {\r\n          time--\r\n          if (time >= 0) {\r\n            self.send = time + 's后重新发送'\r\n          } else if (time < 0) {\r\n            self.send = '重新发送验证码'\r\n            self.disabled = false //倒计时结束能够重新点击发送的按钮 \r\n            clearInterval(timer) //清除定时器 \r\n            time = 60 //设置循环重新开始条件 \r\n          }\r\n        }\r\n      },\r\n      pswforget() {\r\n        uni.navigateTo({ url: '../password/password' })\r\n      },\r\n      toLogin() {\r\n        this.wayOfLogin = false\r\n      },\r\n      toLoginCaptcha() {\r\n        this.wayOfLogin = true\r\n        // uni.navigateTo({\r\n        // \turl:'./login-captcha/login-captcha'\r\n        // });\r\n      },\r\n      checkboxChange: function(e) {\r\n        console.log(e.detail.value)\r\n        if (e.detail.value == '') {\r\n          this.checkFlag = false\r\n        } else {\r\n          this.checkFlag = true\r\n        }\r\n        console.log(this.checkFlag)\r\n      },\r\n      goToPrivacy() {\r\n        console.log('跳转')\r\n        plus.runtime.openURL('https://www.smartlab.vip/privacypolicy/index.html')\r\n      },\r\n      switchChange(e) {\r\n        this.rememberFlag = e.detail.value\r\n      },\r\n\r\n      //登陆函数(验证码)\r\n      async bindLoginWithCode() {\r\n        if (this.phone <= 0) {\r\n          uni.showToast({\r\n            icon: 'none',\r\n            title: '请输入手机号'\r\n          })\r\n          return\r\n        }\r\n        if (this.checkFlag !== true) {\r\n          uni.showToast({\r\n            icon: 'none',\r\n            title: '未勾选隐私政策'\r\n          })\r\n          return\r\n        }\r\n        if (this.captcha <= 0) {\r\n          uni.showToast({\r\n            icon: 'none',\r\n            title: '请输入验证码'\r\n          })\r\n          return\r\n        }\r\n        //post信息到后端\r\n        var that = this\r\n        console.log(this.phone + '' + this.captcha + '' + this.smsId)\r\n        let [res, err] = await UserApi.signInWithCaptcha(this.phone, this.captcha, this.smsId)\r\n        console.log(res)\r\n        console.log(res.data.data.success)\r\n        if (res.data.success == 1) {\r\n          uni.showTabBar()\r\n          console.log(res.data.data.uid)\r\n          that.uid = res.data.data.uid\r\n          commBnsConfig.FunSetPersistentData('signinData', res.data.data) //保存会话信息\r\n          // 绑定uniapp cid和uid 用于消息推送\r\n          console.log(plus.push.getClientInfo().clientid)\r\n          commBnsUniHttpRequest.bindAlias(res.data.data.uid.toString());\r\n          await that.getuserinfo()\r\n          if (this.rememberFlag) {\r\n            uni.setStorageSync('usertel', that.phone) //记住上次登录账号\r\n          }\r\n          uni.reLaunch({ url: '../../project-list/ProjectList' })\r\n        } else {\r\n          uni.showToast({\r\n            icon: 'none',\r\n            title: res.data.message\r\n          })\r\n        }\r\n      },\r\n      async bindLogin() {\r\n        // plus.push.getClientInfoAsync((info) => {  \r\n        //      let cid = info[\"clientid\"];  \r\n        //      console.log(cid)\r\n        // });\r\n        \r\n        if (this.wayOfLogin) {\r\n          this.bindLoginWithCode()\r\n        } else {\r\n          if (this.phone <= 0) {\r\n            uni.showToast({\r\n              icon: 'none',\r\n              title: '请输入手机号'\r\n            })\r\n            return\r\n          }\r\n          if (!(/^1[3456789]\\d{9}$/.test(this.phone))) {\r\n            uni.showToast({\r\n              icon: 'none',\r\n              title: '手机号格式错误',\r\n            })\r\n            flag = false\r\n            return\r\n          }\r\n          if (this.password <= 0) {\r\n            uni.showToast({\r\n              icon: 'none',\r\n              title: '请输入密码'\r\n            })\r\n            return\r\n          }\r\n          if (this.checkFlag !== true) {\r\n            uni.showToast({\r\n              icon: 'none',\r\n              title: '未勾选隐私政策'\r\n            })\r\n            return\r\n          }\r\n          this.password = this.password.trim()\r\n          //post 获取信息\r\n          let that = this\r\n          let [res, err] = await UserApi.signInWithPassword(\r\n            that.phone,\r\n            that.password)\r\n          console.log(res)\r\n          if (err) {\r\n            console.log(err)\r\n          }\r\n          if (res.data.success === 0) {\r\n            if (res.data.message === 'Bad credentials') {\r\n              uni.showToast({\r\n                icon: 'none',\r\n                title: '用户名或密码错误'\r\n              })\r\n            } else if (res.data.message === 'User is disabled') {\r\n              uni.showToast({\r\n                icon: 'none',\r\n                title: '用户被禁止'\r\n              })\r\n            } else {\r\n              uni.showToast({\r\n                icon: 'none',\r\n                title: res.data.message\r\n              })\r\n            }\r\n          } else if (res.data.success === 1) {\r\n            console.log(res)\r\n            commBnsConfig.FunSetPersistentData('signinData', res.data.data) //保存会话信息\r\n            // 绑定uniapp cid和uid 用于消息推送\r\n            commBnsUniHttpRequest.bindAlias(res.data.data.uid.toString())\r\n            //记住我\r\n            console.log(this.rememberFlag)\r\n            if (this.rememberFlag) {\r\n              uni.setStorageSync('usertel', that.phone) //记住上次登录账号\r\n            }\r\n            that.uid = res.data.data.uid\r\n            await that.getuserinfo()\r\n            uni.reLaunch({ url: '../../project-list/ProjectList' })\r\n          }\r\n        }\r\n      },\r\n\r\n      // 注册，暂时\r\n      toRegister() {\r\n        uni.navigateTo({ url: '../register/register' })\r\n      }\r\n    },\r\n  }\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n  page {\r\n    overflow-x: auto;\r\n  }\r\n\r\n  .content {\r\n    margin-top: 80upx;\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n\r\n  .content-input {\r\n    margin-top: 5upx;\r\n    height: 380upx;\r\n    margin-left: 60upx;\r\n    margin-right: 60upx;\r\n    display: flex;\r\n    flex-direction: column;\r\n  }\r\n\r\n  .background1 {\r\n    position: fixed;\r\n    z-index: -100;\r\n    width: 400upx;\r\n    height: 400upx;\r\n    left: 400upx;\r\n    top: -150upx;\r\n    background: conic-gradient(from 180deg at 50% 50%, #B9DAFB 0deg, #9895EE 0.04deg, #C55492 0.07deg, #ECACAD 95.99deg, #B9DAFB 360deg);\r\n    opacity: 0.7;\r\n    filter: blur(200upx);\r\n  }\r\n\r\n  .background2 {\r\n    position: fixed;\r\n    z-index: -100;\r\n    width: 380upx;\r\n    height: 380upx;\r\n    left: -108upx;\r\n    top: 0upx;\r\n    background: conic-gradient(from 180deg at 50% 50%, #B9DAFB 0deg, #9895EE 285deg, #ECACAD 359.96deg, #C55492 360deg);\r\n    opacity: 0.5;\r\n    filter: blur(200upx);\r\n  }\r\n\r\n  .background3 {\r\n    position: fixed;\r\n    z-index: -100;\r\n    width: 480upx;\r\n    height: 400upx;\r\n    left: 340upx;\r\n    top: 680upx;\r\n    background: conic-gradient(from 180deg at 50% 50%, #B9DAFB 0deg, #9895EE 0.04deg, #C55492 0.07deg, #ECACAD 95.99deg, #B9DAFB 360deg);\r\n    opacity: 0.7;\r\n    filter: blur(200upx);\r\n  }\r\n\r\n  .background4 {\r\n    position: fixed;\r\n    z-index: -100;\r\n    width: 700upx;\r\n    height: 644upx;\r\n    left: 720upx;\r\n    top: 1000upx;\r\n    background: conic-gradient(from 180deg at 50% 50%, #B9DAFB 0deg, #ECACAD 95.99deg, #9895EE 206.25deg, #90A2F8 292.5deg, #C55492 360deg);\r\n    opacity: 0.5;\r\n    filter: blur(200upx);\r\n    transform: matrix(-1, 0, 0, 1, 0, 0);\r\n  }\r\n\r\n  .background5 {\r\n    position: fixed;\r\n    z-index: -100;\r\n    width: 360upx;\r\n    height: 340upx;\r\n    left: -200upx;\r\n    top: 1400upx;\r\n    background: conic-gradient(from 180deg at 50% 50%, #B9CBFB 0deg, #ECACAD 95.99deg, #9895EE 112.5deg, #C55492 196.87deg, #90A2F8 292.5deg, #B9CBFB 360deg);\r\n    opacity: 0.4;\r\n    filter: blur(200upx);\r\n  }\r\n\r\n  .txt-active {\r\n    font-family: 'PingFang HK';\r\n    font-style: normal;\r\n    font-weight: bolder;\r\n    font-size: 48upx;\r\n    color: #120D26;\r\n    color: #120D26;\r\n    border-bottom: #5669FF 10upx solid;\r\n  }\r\n\r\n  .txt {\r\n    font-family: 'PingFang HK';\r\n    font-style: normal;\r\n    font-weight: 400;\r\n    font-size: 38upx;\r\n  }\r\n\r\n  .icon-input {\r\n    width: 100upx;\r\n    height: 100upx;\r\n    display: flex;\r\n    justify-content: center;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    font-size: 60upx;\r\n    color: #747688;\r\n  }\r\n\r\n  .icon-input image {\r\n    height: 60%;\r\n    width: 60%;\r\n  }\r\n\r\n  .icon-input-message {\r\n    width: 80upx;\r\n    height: 60upx;\r\n    display: flex;\r\n    justify-content: center;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    font-size: 40upx;\r\n    color: #747688;\r\n  }\r\n\r\n  .icon-input-message image {\r\n    height: 70%;\r\n    width: 90%;\r\n  }\r\n\r\n\r\n  .placeholder {\r\n    font-family: 'PingFang SC';\r\n    font-style: normal;\r\n    font-weight: 400;\r\n    font-size: 32upx;\r\n    line-height: 42upx;\r\n  }\r\n\r\n  .placeholder-message {\r\n    font-family: 'PingFang SC';\r\n    font-style: normal;\r\n    font-weight: 400;\r\n    font-size: 30upx;\r\n    padding-left: 10upx;\r\n    line-height: 43upx;\r\n  }\r\n\r\n  .user-input {\r\n    box-sizing: border-box;\r\n    border-radius: 24upx;\r\n    display: flex;\r\n    align-items: center;\r\n    padding-left: 20upx;\r\n    margin-right: 10upx;\r\n    margin-top: 40upx;\r\n    height: 120upx;\r\n    border: 4upx #E4DFDF solid;\r\n  }\r\n\r\n  .password-input {\r\n    box-sizing: border-box;\r\n    border-radius: 24upx;\r\n    display: flex;\r\n    align-items: center;\r\n    padding-left: 20upx;\r\n    margin-right: 10upx;\r\n    margin-top: 50upx;\r\n    height: 120upx;\r\n    border: 4upx #E4DFDF solid;\r\n  }\r\n\r\n  .message-send {\r\n    display: flex;\r\n    flex-direction: row;\r\n    justify-content: space-between;\r\n  }\r\n\r\n  .message-sender {\r\n    font-family: 'PingFang HK';\r\n    font-style: normal;\r\n    font-weight: bolder;\r\n    line-height: 100upx;\r\n    font-size: 32upx;\r\n    letter-spacing: 2upx;\r\n    color: #FFFFFF;\r\n    background: #5669FF;\r\n    box-shadow: 0upx 20upx 70upx rgba(111, 126, 201, 0.25);\r\n    border-radius: 30upx;\r\n  }\r\n\r\n  .message-input {\r\n    box-sizing: border-box;\r\n    border-radius: 24upx;\r\n    display: flex;\r\n    align-items: center;\r\n    padding-left: 15upx;\r\n    width: 400upx;\r\n    margin-top: 50upx;\r\n    height: 120upx;\r\n    border: 4upx #E4DFDF solid;\r\n  }\r\n\r\n  .message-btn {\r\n    display: flex;\r\n    width: 380upx;\r\n    margin-left: 10upx;\r\n    margin-top: 50upx;\r\n    align-items: center;\r\n  }\r\n\r\n  .icon-eye {\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n    align-items: center;\r\n    margin-left: 30upx;\r\n    width: 60upx;\r\n    height: 60upx;\r\n    font-size: 40upx;\r\n    color: #747688;\r\n  }\r\n\r\n  .yinsi {\r\n    width: 100%;\r\n    align-items: center;\r\n    justify-content: center;\r\n    text-align: center;\r\n  }\r\n\r\n  .logo {\r\n    margin-top: 50upx;\r\n    width: 240upx;\r\n  }\r\n\r\n  .title {\r\n    font-size: 50rpx;\r\n    color: #37364A;\r\n    font-family: 'PingFang SC';\r\n    font-style: normal;\r\n    font-weight: bolder;\r\n    margin-bottom: 70rpx;\r\n  }\r\n\r\n  .uni-row {\r\n    display: flex;\r\n    flex-direction: row;\r\n    margin-left: 60rpx;\r\n    margin-right: 60rpx;\r\n    height: 80rpx;\r\n    /* margin-bottom: 80upx; */\r\n  }\r\n\r\n  .uni-eye-active {\r\n    color: #007AFF;\r\n  }\r\n\r\n  .btn {\r\n    margin-top: 80rpx;\r\n    margin-bottom: 15rpx;\r\n    background-color: $uni-primary;\r\n    margin-left: 90rpx;\r\n    margin-right: 90rpx;\r\n    height: 100rpx;\r\n    color: white;\r\n    box-shadow: 0upx 20upx 70upx rgba(111, 126, 201, 0.25);\r\n    border-radius: 30upx;\r\n    font-size: 30rpx;\r\n    line-height: 100rpx;\r\n  }\r\n\r\n  .txt2 {\r\n    font-size: 30rpx;\r\n    color: #5669FF;\r\n  }\r\n\r\n  .bottom-right {\r\n    width: 50%;\r\n    text-align: left;\r\n  }\r\n\r\n  .bottom-left {\r\n    width: 50%;\r\n    text-align: right;\r\n  }\r\n</style>\r\n","import mod from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./login.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./login.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1681473105381\n      var cssReload = require(\"D:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}